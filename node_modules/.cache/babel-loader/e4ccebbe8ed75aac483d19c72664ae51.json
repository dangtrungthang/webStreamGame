{"ast":null,"code":"\"use strict\";\n/**\r\n * MouseResponder.ts\r\n *\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT license.\r\n *\r\n * Handles tracking of mouse movements.\r\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _ = require(\"./../utils/lodashMini\");\n\nvar _compareDOMOrder = function (a, b) {\n  if (a.target.compareDocumentPosition(b.target) & Node.DOCUMENT_POSITION_PRECEDING) {\n    return 1;\n  } else {\n    return -1;\n  }\n};\n\nvar MouseResponder =\n/** @class */\nfunction () {\n  function MouseResponder() {}\n\n  MouseResponder.setModalIsDisplayed = function (isDisplayed) {\n    MouseResponder._isModalDisplayed = isDisplayed;\n  };\n\n  MouseResponder.create = function (config) {\n    MouseResponder._initializeEventHandlers();\n\n    MouseResponder._responders = MouseResponder._responders || [];\n    var responder = {\n      id: config.id,\n      target: config.target,\n      shouldBecomeFirstResponder: function (event, gestureState) {\n        if (MouseResponder._isModalDisplayed && config.disableWhenModal) {\n          return false;\n        }\n\n        if (!config.shouldBecomeFirstResponder) {\n          return false;\n        }\n\n        return config.shouldBecomeFirstResponder(event, gestureState);\n      },\n      onMove: function (event, gestureState) {\n        if (!config.onMove) {\n          return;\n        }\n\n        config.onMove(event, gestureState);\n      },\n      onTerminate: function (event, gestureState) {\n        if (!config.onTerminate) {\n          return;\n        }\n\n        config.onTerminate(event, gestureState);\n      }\n    };\n\n    MouseResponder._responders.push(responder);\n\n    return {\n      dispose: function () {\n        _.remove(MouseResponder._responders, function (r) {\n          return r.id === responder.id;\n        });\n\n        if (MouseResponder._responders.length === 0) {\n          MouseResponder._removeEventHandlers();\n        }\n      }\n    };\n  };\n\n  MouseResponder._initializeEventHandlers = function () {\n    if (MouseResponder._initialized) {\n      return;\n    }\n\n    window.addEventListener('mousedown', MouseResponder._onMouseDown);\n    window.addEventListener('mousemove', MouseResponder._onMouseMove);\n    window.addEventListener('mouseup', MouseResponder._onMouseUp);\n    MouseResponder._initialized = true;\n  };\n\n  MouseResponder._removeEventHandlers = function () {\n    if (!MouseResponder._initialized) {\n      return;\n    }\n\n    window.removeEventListener('mousedown', MouseResponder._onMouseDown);\n    window.removeEventListener('mousemove', MouseResponder._onMouseMove);\n    window.removeEventListener('mouseup', MouseResponder._onMouseUp);\n    MouseResponder._initialized = false;\n  };\n\n  MouseResponder._currentResponder = null;\n  MouseResponder._pendingGestureState = null;\n  MouseResponder._initialized = false;\n  MouseResponder._isModalDisplayed = false;\n\n  MouseResponder._onMouseDown = function (event) {\n    // We need to skip new gesture starts when there is already on in progress\n    if (MouseResponder._currentResponder) {\n      event.preventDefault();\n      event.stopPropagation();\n      return;\n    }\n\n    MouseResponder._pendingGestureState = {\n      initialClientX: event.clientX,\n      initialClientY: event.clientY,\n      initialPageX: event.pageX,\n      initialPageY: event.pageY,\n      clientX: event.clientX,\n      clientY: event.clientY,\n      pageX: event.pageX,\n      pageY: event.pageY,\n      velocityX: 0,\n      velocityY: 0,\n      timeStamp: Date.now(),\n      isComplete: false,\n      isTouch: false\n    }; // We must sort them properly to be consistent with native PanResponder picks it's first responders\n    // In native there is no z-index and PanResponder picks always the last registered element.\n    // in case of native, that's last element in \"DOM\"\n\n    MouseResponder._responders.sort(_compareDOMOrder); // We need to pick a responder that will handle this GestureView\n\n\n    var firstResponder = _.findLast(MouseResponder._responders, function (responder) {\n      return responder.shouldBecomeFirstResponder(event, MouseResponder._pendingGestureState);\n    });\n\n    if (firstResponder) {\n      MouseResponder._currentResponder = firstResponder;\n    }\n  };\n\n  MouseResponder._onMouseMove = function (event) {\n    if (MouseResponder._currentResponder && MouseResponder._pendingGestureState) {\n      var _a = MouseResponder._calcVelocity(event, MouseResponder._pendingGestureState),\n          velocityX = _a.velocityX,\n          velocityY = _a.velocityY;\n\n      MouseResponder._pendingGestureState = _.merge({}, MouseResponder._pendingGestureState, {\n        clientX: event.clientX,\n        clientY: event.clientY,\n        pageX: event.pageX,\n        pageY: event.pageY,\n        velocityX: velocityX,\n        velocityY: velocityY,\n        isComplete: false\n      });\n\n      if (event.buttons === 0) {\n        MouseResponder._onMouseUp(event);\n      } else {\n        MouseResponder._currentResponder.onMove(event, MouseResponder._pendingGestureState);\n      }\n    }\n  };\n\n  MouseResponder._onMouseUp = function (event) {\n    // We check whether there is still some buttom pressed\n    // in case there are still some buttons left,\n    // we don't stop terminate the gesture.\n    if (event.buttons !== 0) {\n      event.preventDefault();\n      event.stopPropagation();\n      return;\n    }\n\n    if (MouseResponder._currentResponder && MouseResponder._pendingGestureState) {\n      var _a = MouseResponder._calcVelocity(event, MouseResponder._pendingGestureState),\n          velocityX = _a.velocityX,\n          velocityY = _a.velocityY;\n\n      MouseResponder._pendingGestureState = _.merge({}, MouseResponder._pendingGestureState, {\n        clientX: event.clientX,\n        clientY: event.clientY,\n        pageX: event.pageX,\n        pageY: event.pageY,\n        velocityX: velocityX,\n        velocityY: velocityY,\n        isComplete: true\n      });\n\n      MouseResponder._currentResponder.onTerminate(event, MouseResponder._pendingGestureState);\n\n      MouseResponder._currentResponder = null;\n      MouseResponder._pendingGestureState = null;\n    }\n  };\n\n  MouseResponder._calcVelocity = function (e, gestureState) {\n    var time = Date.now() - gestureState.timeStamp;\n    var velocityX = (e.clientX - gestureState.initialClientX) / time;\n    var velocityY = (e.clientY - gestureState.initialClientY) / time;\n    return {\n      velocityX: velocityX,\n      velocityY: velocityY\n    };\n  };\n\n  return MouseResponder;\n}();\n\nexports.default = MouseResponder;","map":{"version":3,"sources":["/Users/trungthang/Documents/webStreamGame/node_modules/react-ult/dist/web/utils/MouseResponder.js"],"names":["Object","defineProperty","exports","value","_","require","_compareDOMOrder","a","b","target","compareDocumentPosition","Node","DOCUMENT_POSITION_PRECEDING","MouseResponder","setModalIsDisplayed","isDisplayed","_isModalDisplayed","create","config","_initializeEventHandlers","_responders","responder","id","shouldBecomeFirstResponder","event","gestureState","disableWhenModal","onMove","onTerminate","push","dispose","remove","r","length","_removeEventHandlers","_initialized","window","addEventListener","_onMouseDown","_onMouseMove","_onMouseUp","removeEventListener","_currentResponder","_pendingGestureState","preventDefault","stopPropagation","initialClientX","clientX","initialClientY","clientY","initialPageX","pageX","initialPageY","pageY","velocityX","velocityY","timeStamp","Date","now","isComplete","isTouch","sort","firstResponder","findLast","_a","_calcVelocity","merge","buttons","e","time","default"],"mappings":"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","sourcesContent":["\"use strict\";\r\n/**\r\n * MouseResponder.ts\r\n *\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT license.\r\n *\r\n * Handles tracking of mouse movements.\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar _ = require(\"./../utils/lodashMini\");\r\nvar _compareDOMOrder = function (a, b) {\r\n    if (a.target.compareDocumentPosition(b.target) & Node.DOCUMENT_POSITION_PRECEDING) {\r\n        return 1;\r\n    }\r\n    else {\r\n        return -1;\r\n    }\r\n};\r\nvar MouseResponder = /** @class */ (function () {\r\n    function MouseResponder() {\r\n    }\r\n    MouseResponder.setModalIsDisplayed = function (isDisplayed) {\r\n        MouseResponder._isModalDisplayed = isDisplayed;\r\n    };\r\n    MouseResponder.create = function (config) {\r\n        MouseResponder._initializeEventHandlers();\r\n        MouseResponder._responders = MouseResponder._responders || [];\r\n        var responder = {\r\n            id: config.id,\r\n            target: config.target,\r\n            shouldBecomeFirstResponder: function (event, gestureState) {\r\n                if (MouseResponder._isModalDisplayed && config.disableWhenModal) {\r\n                    return false;\r\n                }\r\n                if (!config.shouldBecomeFirstResponder) {\r\n                    return false;\r\n                }\r\n                return config.shouldBecomeFirstResponder(event, gestureState);\r\n            },\r\n            onMove: function (event, gestureState) {\r\n                if (!config.onMove) {\r\n                    return;\r\n                }\r\n                config.onMove(event, gestureState);\r\n            },\r\n            onTerminate: function (event, gestureState) {\r\n                if (!config.onTerminate) {\r\n                    return;\r\n                }\r\n                config.onTerminate(event, gestureState);\r\n            },\r\n        };\r\n        MouseResponder._responders.push(responder);\r\n        return {\r\n            dispose: function () {\r\n                _.remove(MouseResponder._responders, function (r) { return r.id === responder.id; });\r\n                if (MouseResponder._responders.length === 0) {\r\n                    MouseResponder._removeEventHandlers();\r\n                }\r\n            },\r\n        };\r\n    };\r\n    MouseResponder._initializeEventHandlers = function () {\r\n        if (MouseResponder._initialized) {\r\n            return;\r\n        }\r\n        window.addEventListener('mousedown', MouseResponder._onMouseDown);\r\n        window.addEventListener('mousemove', MouseResponder._onMouseMove);\r\n        window.addEventListener('mouseup', MouseResponder._onMouseUp);\r\n        MouseResponder._initialized = true;\r\n    };\r\n    MouseResponder._removeEventHandlers = function () {\r\n        if (!MouseResponder._initialized) {\r\n            return;\r\n        }\r\n        window.removeEventListener('mousedown', MouseResponder._onMouseDown);\r\n        window.removeEventListener('mousemove', MouseResponder._onMouseMove);\r\n        window.removeEventListener('mouseup', MouseResponder._onMouseUp);\r\n        MouseResponder._initialized = false;\r\n    };\r\n    MouseResponder._currentResponder = null;\r\n    MouseResponder._pendingGestureState = null;\r\n    MouseResponder._initialized = false;\r\n    MouseResponder._isModalDisplayed = false;\r\n    MouseResponder._onMouseDown = function (event) {\r\n        // We need to skip new gesture starts when there is already on in progress\r\n        if (MouseResponder._currentResponder) {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            return;\r\n        }\r\n        MouseResponder._pendingGestureState = {\r\n            initialClientX: event.clientX,\r\n            initialClientY: event.clientY,\r\n            initialPageX: event.pageX,\r\n            initialPageY: event.pageY,\r\n            clientX: event.clientX,\r\n            clientY: event.clientY,\r\n            pageX: event.pageX,\r\n            pageY: event.pageY,\r\n            velocityX: 0,\r\n            velocityY: 0,\r\n            timeStamp: Date.now(),\r\n            isComplete: false,\r\n            isTouch: false,\r\n        };\r\n        // We must sort them properly to be consistent with native PanResponder picks it's first responders\r\n        // In native there is no z-index and PanResponder picks always the last registered element.\r\n        // in case of native, that's last element in \"DOM\"\r\n        MouseResponder._responders.sort(_compareDOMOrder);\r\n        // We need to pick a responder that will handle this GestureView\r\n        var firstResponder = _.findLast(MouseResponder._responders, function (responder) { return (responder.shouldBecomeFirstResponder(event, MouseResponder._pendingGestureState)); });\r\n        if (firstResponder) {\r\n            MouseResponder._currentResponder = firstResponder;\r\n        }\r\n    };\r\n    MouseResponder._onMouseMove = function (event) {\r\n        if (MouseResponder._currentResponder && MouseResponder._pendingGestureState) {\r\n            var _a = MouseResponder._calcVelocity(event, MouseResponder._pendingGestureState), velocityX = _a.velocityX, velocityY = _a.velocityY;\r\n            MouseResponder._pendingGestureState = _.merge({}, MouseResponder._pendingGestureState, {\r\n                clientX: event.clientX,\r\n                clientY: event.clientY,\r\n                pageX: event.pageX,\r\n                pageY: event.pageY,\r\n                velocityX: velocityX,\r\n                velocityY: velocityY,\r\n                isComplete: false,\r\n            });\r\n            if (event.buttons === 0) {\r\n                MouseResponder._onMouseUp(event);\r\n            }\r\n            else {\r\n                MouseResponder._currentResponder.onMove(event, MouseResponder._pendingGestureState);\r\n            }\r\n        }\r\n    };\r\n    MouseResponder._onMouseUp = function (event) {\r\n        // We check whether there is still some buttom pressed\r\n        // in case there are still some buttons left,\r\n        // we don't stop terminate the gesture.\r\n        if (event.buttons !== 0) {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            return;\r\n        }\r\n        if (MouseResponder._currentResponder && MouseResponder._pendingGestureState) {\r\n            var _a = MouseResponder._calcVelocity(event, MouseResponder._pendingGestureState), velocityX = _a.velocityX, velocityY = _a.velocityY;\r\n            MouseResponder._pendingGestureState = _.merge({}, MouseResponder._pendingGestureState, {\r\n                clientX: event.clientX,\r\n                clientY: event.clientY,\r\n                pageX: event.pageX,\r\n                pageY: event.pageY,\r\n                velocityX: velocityX,\r\n                velocityY: velocityY,\r\n                isComplete: true,\r\n            });\r\n            MouseResponder._currentResponder.onTerminate(event, MouseResponder._pendingGestureState);\r\n            MouseResponder._currentResponder = null;\r\n            MouseResponder._pendingGestureState = null;\r\n        }\r\n    };\r\n    MouseResponder._calcVelocity = function (e, gestureState) {\r\n        var time = Date.now() - gestureState.timeStamp;\r\n        var velocityX = (e.clientX - gestureState.initialClientX) / time;\r\n        var velocityY = (e.clientY - gestureState.initialClientY) / time;\r\n        return {\r\n            velocityX: velocityX,\r\n            velocityY: velocityY,\r\n        };\r\n    };\r\n    return MouseResponder;\r\n}());\r\nexports.default = MouseResponder;\r\n"]},"metadata":{},"sourceType":"script"}