{"ast":null,"code":"\"use strict\";\n/**\r\n * View.tsx\r\n *\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT license.\r\n *\r\n * Web-specific implementation of the cross-platform View abstraction.\r\n */\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.View = void 0;\n\nvar PropTypes = require(\"prop-types\");\n\nvar React = require(\"react\");\n\nvar ReactDOM = require(\"react-dom\");\n\nvar AppConfig_1 = require(\"../common/AppConfig\");\n\nvar AutoFocusHelper_1 = require(\"../common/utils/AutoFocusHelper\");\n\nvar FocusManager_1 = require(\"../common/utils/FocusManager\");\n\nvar RX = require(\"../common/Interfaces\");\n\nvar AccessibilityUtil_1 = require(\"./AccessibilityUtil\");\n\nvar AnimateListEdits_1 = require(\"./listAnimations/AnimateListEdits\");\n\nvar FocusManager_2 = require(\"./utils/FocusManager\");\n\nvar restyleForInlineText_1 = require(\"./utils/restyleForInlineText\");\n\nvar Styles_1 = require(\"./Styles\");\n\nvar ViewBase_1 = require(\"./ViewBase\"); // Cast to any to allow merging of web and RX styles\n\n\nvar _styles = {\n  defaultStyle: {\n    position: 'relative',\n    display: 'flex',\n    flexDirection: 'column',\n    flexGrow: 0,\n    flexShrink: 0,\n    overflow: 'hidden',\n    alignItems: 'stretch'\n  },\n  // See resize detector comments in renderResizeDetectorIfNeeded() method below.\n  resizeDetectorContainerStyles: {\n    position: 'absolute',\n    left: '0',\n    top: '0',\n    right: '0',\n    bottom: '0',\n    overflow: 'scroll',\n    zIndex: '-1',\n    visibility: 'hidden'\n  },\n  resizeGrowDetectorStyles: {\n    position: 'absolute',\n    left: '100500px',\n    top: '100500px',\n    width: '1px',\n    height: '1px'\n  },\n  resizeShrinkDetectorStyles: {\n    position: 'absolute',\n    width: '150%',\n    height: '150%'\n  }\n};\n\nif (typeof document !== 'undefined') {\n  var ignorePointerEvents = '.reactxp-ignore-pointer-events  * { pointer-events: auto; }';\n  var blockPointerEvents = '.reactxp-block-pointer-events * { pointer-events: none !important; }';\n  var head = document.head;\n  var style = document.createElement('style');\n  style.type = 'text/css';\n  style.appendChild(document.createTextNode(ignorePointerEvents));\n  style.appendChild(document.createTextNode(blockPointerEvents));\n  head.appendChild(style);\n}\n\nvar View =\n/** @class */\nfunction (_super) {\n  __extends(View, _super);\n\n  function View(props, context) {\n    var _this = _super.call(this, props, context) || this;\n\n    _this._limitFocusWithin = false;\n    _this._isFocusLimited = false;\n    _this._resizeDetectorNodes = {};\n\n    _this._onResizeDetectorGrowRef = function (node) {\n      _this._resizeDetectorNodes.grow = node || undefined;\n\n      _this._resizeDetectorOnScroll();\n    };\n\n    _this._onResizeDetectorShrinkRef = function (node) {\n      _this._resizeDetectorNodes.shrink = node || undefined;\n\n      _this._resizeDetectorOnScroll();\n    };\n\n    _this._resizeDetectorOnScroll = function () {\n      if (_this._resizeDetectorAnimationFrame) {\n        // Do not execute action more often than once per animation frame.\n        return;\n      }\n\n      _this._resizeDetectorAnimationFrame = window.requestAnimationFrame(function () {\n        if (_this._isMounted) {\n          _this._resizeDetectorReset();\n\n          _this._resizeDetectorAnimationFrame = undefined;\n\n          ViewBase_1.default._checkViews();\n        }\n      });\n    };\n\n    _this._limitFocusWithin = props.limitFocusWithin === RX.Types.LimitFocusType.Limited || props.limitFocusWithin === RX.Types.LimitFocusType.Accessible;\n\n    if (_this.props.restrictFocusWithin || _this._limitFocusWithin) {\n      _this._focusManager = new FocusManager_2.FocusManager(context && context.focusManager);\n\n      if (_this._limitFocusWithin) {\n        _this.setFocusLimited(true);\n      }\n    }\n\n    _this._popupContainer = context && context.popupContainer;\n\n    if (props.arbitrateFocus) {\n      _this._updateFocusArbitratorProvider(props);\n    }\n\n    return _this;\n  }\n\n  View.prototype._renderResizeDetectorIfNeeded = function (containerStyles) {\n    // If needed, additional invisible DOM elements will be added inside the\n    // view to track the size changes that are performed behind our back by\n    // the browser's layout engine faster (ViewBase checks for the layout\n    // updates once a second and sometimes it's not fast enough).\n    // Unfortunately <div> doesn't have `resize` event, so we're trying to\n    // detect the fact that the view has been resized with `scroll` events.\n    // To do that, we create two scrollable <div>s and we put them into a\n    // state in which `scroll` event is triggered by the browser when the\n    // container gets resized (one element triggers `scroll` when the\n    // container gets bigger, another triggers `scroll` when the container\n    // gets smaller).\n    if (!this.props.importantForLayout) {\n      return null;\n    }\n\n    if (containerStyles.position !== 'relative') {\n      if (AppConfig_1.default.isDevelopmentMode()) {\n        console.error('View: importantForLayout property is applicable only for a view with relative position');\n      }\n\n      return null;\n    }\n\n    return [React.createElement(\"div\", {\n      key: 'grow',\n      style: _styles.resizeDetectorContainerStyles,\n      ref: this._onResizeDetectorGrowRef,\n      onScroll: this._resizeDetectorOnScroll\n    }, React.createElement(\"div\", {\n      style: _styles.resizeGrowDetectorStyles\n    })), React.createElement(\"div\", {\n      key: 'shrink',\n      style: _styles.resizeDetectorContainerStyles,\n      ref: this._onResizeDetectorShrinkRef,\n      onScroll: this._resizeDetectorOnScroll\n    }, React.createElement(\"div\", {\n      style: _styles.resizeShrinkDetectorStyles\n    }))];\n  };\n\n  View.prototype._resizeDetectorReset = function () {\n    // Scroll the detectors to the bottom-right corner so\n    // that `scroll` events will be triggered when the container\n    // is resized.\n    var scrollMax = 100500;\n    var node = this._resizeDetectorNodes.grow;\n\n    if (node) {\n      node.scrollLeft = scrollMax;\n      node.scrollTop = scrollMax;\n    }\n\n    node = this._resizeDetectorNodes.shrink;\n\n    if (node) {\n      node.scrollLeft = scrollMax;\n      node.scrollTop = scrollMax;\n    }\n  };\n\n  View.prototype.getChildContext = function () {\n    // Let descendant Types components know that their nearest Types ancestor is not an Types.Text.\n    // Because they're in an Types.View, they should use their normal styling rather than their\n    // special styling for appearing inline with text.\n    var childContext = {\n      isRxParentAText: false\n    }; // Provide the descendants with the focus manager and popup container (if any).\n\n    if (this._focusManager) {\n      childContext.focusManager = this._focusManager;\n    }\n\n    if (this._popupContainer) {\n      childContext.popupContainer = this._popupContainer;\n    }\n\n    if (this._focusArbitratorProvider) {\n      childContext.focusArbitrator = this._focusArbitratorProvider;\n    }\n\n    return childContext;\n  };\n\n  View.prototype._getContainer = function () {\n    if (!this._isMounted) {\n      return null;\n    }\n\n    try {\n      return ReactDOM.findDOMNode(this);\n    } catch (_a) {\n      // Handle exception due to potential unmount race condition.\n      return null;\n    }\n  };\n\n  View.prototype._isHidden = function () {\n    return !!this._popupContainer && this._popupContainer.isHidden();\n  };\n\n  View.prototype._updateFocusArbitratorProvider = function (props) {\n    if (props.arbitrateFocus) {\n      if (this._focusArbitratorProvider) {\n        this._focusArbitratorProvider.setCallback(props.arbitrateFocus);\n      } else {\n        this._focusArbitratorProvider = new AutoFocusHelper_1.FocusArbitratorProvider(this, props.arbitrateFocus);\n      }\n    } else if (this._focusArbitratorProvider) {\n      delete this._focusArbitratorProvider;\n    }\n  };\n\n  View.prototype.setFocusRestricted = function (restricted) {\n    if (!this._focusManager || !this.props.restrictFocusWithin) {\n      if (AppConfig_1.default.isDevelopmentMode()) {\n        console.error('View: setFocusRestricted method requires restrictFocusWithin property to be set');\n      }\n\n      return;\n    }\n\n    if (!this._isHidden()) {\n      if (restricted) {\n        this._focusManager.restrictFocusWithin(FocusManager_1.RestrictFocusType.RestrictedFocusFirst);\n      } else {\n        this._focusManager.removeFocusRestriction();\n      }\n    }\n\n    this._isFocusRestricted = restricted;\n  };\n\n  View.prototype.setFocusLimited = function (limited) {\n    if (!this._focusManager || !this._limitFocusWithin) {\n      if (AppConfig_1.default.isDevelopmentMode()) {\n        console.error('View: setFocusLimited method requires limitFocusWithin property to be set');\n      }\n\n      return;\n    }\n\n    if (!this._isHidden()) {\n      if (limited && !this._isFocusLimited) {\n        this._focusManager.limitFocusWithin(this.props.limitFocusWithin);\n      } else if (!limited && this._isFocusLimited) {\n        this._focusManager.removeFocusLimitation();\n      }\n    }\n\n    this._isFocusLimited = limited;\n  };\n\n  View.prototype.render = function () {\n    var combinedStyles = Styles_1.default.combine([_styles.defaultStyle, this.props.style]);\n    var ariaRole = AccessibilityUtil_1.default.accessibilityTraitToString(this.props.accessibilityTraits);\n    var tabIndex = this.props.tabIndex;\n    var ariaSelected = AccessibilityUtil_1.default.accessibilityTraitToAriaSelected(this.props.accessibilityTraits);\n    var isAriaHidden = AccessibilityUtil_1.default.isHidden(this.props.importantForAccessibility);\n    var accessibilityLabel = this.props.accessibilityLabel;\n    var ariaLabelledBy = this.props.ariaLabelledBy;\n    var ariaRoleDescription = this.props.ariaRoleDescription;\n    var ariaLive = this.props.accessibilityLiveRegion ? AccessibilityUtil_1.default.accessibilityLiveRegionToString(this.props.accessibilityLiveRegion) : undefined;\n    var ariaValueNow = this.props.ariaValueNow;\n\n    if (!ariaRole && !accessibilityLabel && !ariaLabelledBy && !ariaRoleDescription && !ariaLive && ariaSelected === undefined && ariaValueNow === undefined && tabIndex === undefined) {\n      // When the accessibility properties are not specified, set role to none.\n      // It tells the screen readers to skip the node, but unlike setting\n      // aria-hidden to true, allows the sub DOM to be processed further.\n      // This signigicantly improves the screen readers performance.\n      ariaRole = 'none';\n    }\n\n    var props = {\n      role: ariaRole,\n      tabIndex: tabIndex,\n      style: combinedStyles,\n      title: this.props.title,\n      'aria-label': accessibilityLabel,\n      'aria-hidden': isAriaHidden,\n      'aria-selected': ariaSelected,\n      'aria-labelledby': ariaLabelledBy,\n      'aria-roledescription': ariaRoleDescription,\n      'aria-live': ariaLive,\n      'aria-valuenow': ariaValueNow,\n      onContextMenu: this.props.onContextMenu,\n      onDoubleClick: this.props.onDoubleClick,\n      onMouseEnter: this.props.onMouseEnter,\n      onMouseLeave: this.props.onMouseLeave,\n      onMouseOver: this.props.onMouseOver,\n      onMouseMove: this.props.onMouseMove,\n      // Weird things happen: ReactXP.Types.Touch is not assignable to React.Touch\n      onTouchStart: this.props.onResponderStart,\n      onTouchStartCapture: this.props.onTouchStartCapture,\n      onTouchMove: this.props.onResponderMove,\n      onTouchMoveCapture: this.props.onTouchMoveCapture,\n      onTouchEnd: this.props.onResponderRelease,\n      onTouchCancel: this.props.onResponderTerminate,\n      draggable: this.props.onDragStart ? true : undefined,\n      onDragStart: this.props.onDragStart,\n      onDrag: this.props.onDrag,\n      onDragEnd: this.props.onDragEnd,\n      onDragEnter: this.props.onDragEnter,\n      onDragOver: this.props.onDragOver,\n      onDragLeave: this.props.onDragLeave,\n      onDrop: this.props.onDrop,\n      onClick: this.props.onPress,\n      onFocus: this.props.onFocus,\n      onBlur: this.props.onBlur,\n      onKeyDown: this.props.onKeyPress,\n      id: this.props.id\n    };\n\n    if (this.props.blockPointerEvents) {\n      // Make this element and all children transparent to pointer events\n      props.className = 'reactxp-block-pointer-events';\n      combinedStyles.pointerEvents = 'none';\n    } else if (this.props.ignorePointerEvents) {\n      // Make this element transparent to pointer events, but allow children to still receive events\n      props.className = 'reactxp-ignore-pointer-events';\n      combinedStyles.pointerEvents = 'none';\n    }\n\n    var reactElement;\n    var childAnimationsEnabled = this.props.animateChildEnter || this.props.animateChildMove || this.props.animateChildLeave;\n\n    if (childAnimationsEnabled) {\n      reactElement = React.createElement(AnimateListEdits_1.default, __assign({}, props, {\n        \"data-test-id\": this.props.testId,\n        animateChildEnter: this.props.animateChildEnter,\n        animateChildMove: this.props.animateChildMove,\n        animateChildLeave: this.props.animateChildLeave\n      }), this.props.children);\n    } else {\n      reactElement = React.createElement(\"div\", __assign({}, props, {\n        \"data-test-id\": this.props.testId\n      }), this._renderResizeDetectorIfNeeded(combinedStyles), this.props.children);\n    }\n\n    return this.context.isRxParentAText ? restyleForInlineText_1.default(reactElement) : reactElement;\n  };\n\n  View.prototype.UNSAFE_componentWillReceiveProps = function (nextProps) {\n    _super.prototype.UNSAFE_componentWillReceiveProps.call(this, nextProps);\n\n    if (AppConfig_1.default.isDevelopmentMode()) {\n      if (this.props.restrictFocusWithin !== nextProps.restrictFocusWithin) {\n        console.error('View: restrictFocusWithin is readonly and changing it during the component life cycle has no effect');\n      }\n\n      if (this.props.limitFocusWithin !== nextProps.limitFocusWithin) {\n        console.error('View: limitFocusWithin is readonly and changing it during the component life cycle has no effect');\n      }\n    }\n\n    if ('arbitrateFocus' in nextProps && this.props.arbitrateFocus !== nextProps.arbitrateFocus) {\n      this._updateFocusArbitratorProvider(nextProps);\n    }\n  };\n\n  View.prototype.enableFocusManager = function () {\n    if (this._focusManager) {\n      if (this.props.restrictFocusWithin && this._isFocusRestricted !== false) {\n        this._focusManager.restrictFocusWithin(FocusManager_1.RestrictFocusType.RestrictedFocusFirst);\n      }\n\n      if (this._limitFocusWithin && this._isFocusLimited) {\n        this._focusManager.limitFocusWithin(this.props.limitFocusWithin);\n      }\n    }\n  };\n\n  View.prototype.disableFocusManager = function () {\n    if (this._focusManager) {\n      this._focusManager.release();\n    }\n  };\n\n  View.prototype.componentDidMount = function () {\n    var _this = this;\n\n    _super.prototype.componentDidMount.call(this);\n\n    if (this.props.autoFocus) {\n      this.requestFocus();\n    } // If we are mounted as visible, do our initialization now. If we are hidden, it will\n    // be done later when the popup is shown.\n\n\n    if (!this._isHidden()) {\n      this.enableFocusManager();\n    }\n\n    if (this._focusManager && this._popupContainer) {\n      this._popupToken = this._popupContainer.registerPopupComponent(function () {\n        return _this.enableFocusManager();\n      }, function () {\n        return _this.disableFocusManager();\n      });\n    }\n  };\n\n  View.prototype.componentWillUnmount = function () {\n    _super.prototype.componentWillUnmount.call(this);\n\n    this.disableFocusManager();\n\n    if (this._popupToken) {\n      this._popupContainer.unregisterPopupComponent(this._popupToken);\n    }\n  };\n\n  View.prototype.blur = function () {\n    var el = this._getContainer();\n\n    if (el) {\n      el.blur();\n    }\n  };\n\n  View.prototype.requestFocus = function () {\n    var _this = this;\n\n    AutoFocusHelper_1.FocusArbitratorProvider.requestFocus(this, function () {\n      return _this.focus();\n    }, function () {\n      return _this._isMounted;\n    });\n  };\n\n  View.prototype.focus = function () {\n    var el = this._getContainer();\n\n    if (el) {\n      el.focus();\n    }\n  };\n\n  View.contextTypes = {\n    isRxParentAText: PropTypes.bool,\n    focusManager: PropTypes.object,\n    popupContainer: PropTypes.object,\n    focusArbitrator: PropTypes.object\n  };\n  View.childContextTypes = {\n    isRxParentAText: PropTypes.bool.isRequired,\n    focusManager: PropTypes.object,\n    popupContainer: PropTypes.object,\n    focusArbitrator: PropTypes.object\n  };\n  return View;\n}(ViewBase_1.default);\n\nexports.View = View;\nFocusManager_2.applyFocusableComponentMixin(View, function (nextProps) {\n  // VoiceOver with the VoiceOver key combinations (Ctrl+Option+Left/Right) focuses\n  // <div>s when whatever tabIndex is set (even if tabIndex=-1). So, View is focusable\n  // when tabIndex is not undefined.\n  var tabIndex = nextProps && 'tabIndex' in nextProps ? nextProps.tabIndex : this.props.tabIndex;\n  return tabIndex !== undefined;\n});\nexports.default = View;","map":{"version":3,"sources":["/Users/trungthang/Documents/webStreamGame/node_modules/react-ult/dist/web/View.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","defineProperty","exports","value","View","PropTypes","require","React","ReactDOM","AppConfig_1","AutoFocusHelper_1","FocusManager_1","RX","AccessibilityUtil_1","AnimateListEdits_1","FocusManager_2","restyleForInlineText_1","Styles_1","ViewBase_1","_styles","defaultStyle","position","display","flexDirection","flexGrow","flexShrink","overflow","alignItems","resizeDetectorContainerStyles","left","top","right","bottom","zIndex","visibility","resizeGrowDetectorStyles","width","height","resizeShrinkDetectorStyles","document","ignorePointerEvents","blockPointerEvents","head","style","createElement","type","appendChild","createTextNode","_super","props","context","_this","_limitFocusWithin","_isFocusLimited","_resizeDetectorNodes","_onResizeDetectorGrowRef","node","grow","undefined","_resizeDetectorOnScroll","_onResizeDetectorShrinkRef","shrink","_resizeDetectorAnimationFrame","window","requestAnimationFrame","_isMounted","_resizeDetectorReset","default","_checkViews","limitFocusWithin","Types","LimitFocusType","Limited","Accessible","restrictFocusWithin","_focusManager","FocusManager","focusManager","setFocusLimited","_popupContainer","popupContainer","arbitrateFocus","_updateFocusArbitratorProvider","_renderResizeDetectorIfNeeded","containerStyles","importantForLayout","isDevelopmentMode","console","error","key","ref","onScroll","scrollMax","scrollLeft","scrollTop","getChildContext","childContext","isRxParentAText","_focusArbitratorProvider","focusArbitrator","_getContainer","findDOMNode","_a","_isHidden","isHidden","setCallback","FocusArbitratorProvider","setFocusRestricted","restricted","RestrictFocusType","RestrictedFocusFirst","removeFocusRestriction","_isFocusRestricted","limited","removeFocusLimitation","render","combinedStyles","combine","ariaRole","accessibilityTraitToString","accessibilityTraits","tabIndex","ariaSelected","accessibilityTraitToAriaSelected","isAriaHidden","importantForAccessibility","accessibilityLabel","ariaLabelledBy","ariaRoleDescription","ariaLive","accessibilityLiveRegion","accessibilityLiveRegionToString","ariaValueNow","role","title","onContextMenu","onDoubleClick","onMouseEnter","onMouseLeave","onMouseOver","onMouseMove","onTouchStart","onResponderStart","onTouchStartCapture","onTouchMove","onResponderMove","onTouchMoveCapture","onTouchEnd","onResponderRelease","onTouchCancel","onResponderTerminate","draggable","onDragStart","onDrag","onDragEnd","onDragEnter","onDragOver","onDragLeave","onDrop","onClick","onPress","onFocus","onBlur","onKeyDown","onKeyPress","id","className","pointerEvents","reactElement","childAnimationsEnabled","animateChildEnter","animateChildMove","animateChildLeave","testId","children","UNSAFE_componentWillReceiveProps","nextProps","enableFocusManager","disableFocusManager","release","componentDidMount","autoFocus","requestFocus","_popupToken","registerPopupComponent","componentWillUnmount","unregisterPopupComponent","blur","el","focus","contextTypes","bool","object","childContextTypes","isRequired","applyFocusableComponentMixin"],"mappings":"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","sourcesContent":["\"use strict\";\r\n/**\r\n * View.tsx\r\n *\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT license.\r\n *\r\n * Web-specific implementation of the cross-platform View abstraction.\r\n */\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.View = void 0;\r\nvar PropTypes = require(\"prop-types\");\r\nvar React = require(\"react\");\r\nvar ReactDOM = require(\"react-dom\");\r\nvar AppConfig_1 = require(\"../common/AppConfig\");\r\nvar AutoFocusHelper_1 = require(\"../common/utils/AutoFocusHelper\");\r\nvar FocusManager_1 = require(\"../common/utils/FocusManager\");\r\nvar RX = require(\"../common/Interfaces\");\r\nvar AccessibilityUtil_1 = require(\"./AccessibilityUtil\");\r\nvar AnimateListEdits_1 = require(\"./listAnimations/AnimateListEdits\");\r\nvar FocusManager_2 = require(\"./utils/FocusManager\");\r\nvar restyleForInlineText_1 = require(\"./utils/restyleForInlineText\");\r\nvar Styles_1 = require(\"./Styles\");\r\nvar ViewBase_1 = require(\"./ViewBase\");\r\n// Cast to any to allow merging of web and RX styles\r\nvar _styles = {\r\n    defaultStyle: {\r\n        position: 'relative',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        flexGrow: 0,\r\n        flexShrink: 0,\r\n        overflow: 'hidden',\r\n        alignItems: 'stretch',\r\n    },\r\n    // See resize detector comments in renderResizeDetectorIfNeeded() method below.\r\n    resizeDetectorContainerStyles: {\r\n        position: 'absolute',\r\n        left: '0',\r\n        top: '0',\r\n        right: '0',\r\n        bottom: '0',\r\n        overflow: 'scroll',\r\n        zIndex: '-1',\r\n        visibility: 'hidden',\r\n    },\r\n    resizeGrowDetectorStyles: {\r\n        position: 'absolute',\r\n        left: '100500px',\r\n        top: '100500px',\r\n        width: '1px',\r\n        height: '1px',\r\n    },\r\n    resizeShrinkDetectorStyles: {\r\n        position: 'absolute',\r\n        width: '150%',\r\n        height: '150%',\r\n    },\r\n};\r\nif (typeof document !== 'undefined') {\r\n    var ignorePointerEvents = '.reactxp-ignore-pointer-events  * { pointer-events: auto; }';\r\n    var blockPointerEvents = '.reactxp-block-pointer-events * { pointer-events: none !important; }';\r\n    var head = document.head;\r\n    var style = document.createElement('style');\r\n    style.type = 'text/css';\r\n    style.appendChild(document.createTextNode(ignorePointerEvents));\r\n    style.appendChild(document.createTextNode(blockPointerEvents));\r\n    head.appendChild(style);\r\n}\r\nvar View = /** @class */ (function (_super) {\r\n    __extends(View, _super);\r\n    function View(props, context) {\r\n        var _this = _super.call(this, props, context) || this;\r\n        _this._limitFocusWithin = false;\r\n        _this._isFocusLimited = false;\r\n        _this._resizeDetectorNodes = {};\r\n        _this._onResizeDetectorGrowRef = function (node) {\r\n            _this._resizeDetectorNodes.grow = node || undefined;\r\n            _this._resizeDetectorOnScroll();\r\n        };\r\n        _this._onResizeDetectorShrinkRef = function (node) {\r\n            _this._resizeDetectorNodes.shrink = node || undefined;\r\n            _this._resizeDetectorOnScroll();\r\n        };\r\n        _this._resizeDetectorOnScroll = function () {\r\n            if (_this._resizeDetectorAnimationFrame) {\r\n                // Do not execute action more often than once per animation frame.\r\n                return;\r\n            }\r\n            _this._resizeDetectorAnimationFrame = window.requestAnimationFrame(function () {\r\n                if (_this._isMounted) {\r\n                    _this._resizeDetectorReset();\r\n                    _this._resizeDetectorAnimationFrame = undefined;\r\n                    ViewBase_1.default._checkViews();\r\n                }\r\n            });\r\n        };\r\n        _this._limitFocusWithin =\r\n            (props.limitFocusWithin === RX.Types.LimitFocusType.Limited) ||\r\n                (props.limitFocusWithin === RX.Types.LimitFocusType.Accessible);\r\n        if (_this.props.restrictFocusWithin || _this._limitFocusWithin) {\r\n            _this._focusManager = new FocusManager_2.FocusManager(context && context.focusManager);\r\n            if (_this._limitFocusWithin) {\r\n                _this.setFocusLimited(true);\r\n            }\r\n        }\r\n        _this._popupContainer = context && context.popupContainer;\r\n        if (props.arbitrateFocus) {\r\n            _this._updateFocusArbitratorProvider(props);\r\n        }\r\n        return _this;\r\n    }\r\n    View.prototype._renderResizeDetectorIfNeeded = function (containerStyles) {\r\n        // If needed, additional invisible DOM elements will be added inside the\r\n        // view to track the size changes that are performed behind our back by\r\n        // the browser's layout engine faster (ViewBase checks for the layout\r\n        // updates once a second and sometimes it's not fast enough).\r\n        // Unfortunately <div> doesn't have `resize` event, so we're trying to\r\n        // detect the fact that the view has been resized with `scroll` events.\r\n        // To do that, we create two scrollable <div>s and we put them into a\r\n        // state in which `scroll` event is triggered by the browser when the\r\n        // container gets resized (one element triggers `scroll` when the\r\n        // container gets bigger, another triggers `scroll` when the container\r\n        // gets smaller).\r\n        if (!this.props.importantForLayout) {\r\n            return null;\r\n        }\r\n        if (containerStyles.position !== 'relative') {\r\n            if (AppConfig_1.default.isDevelopmentMode()) {\r\n                console.error('View: importantForLayout property is applicable only for a view with relative position');\r\n            }\r\n            return null;\r\n        }\r\n        return [\r\n            (React.createElement(\"div\", { key: 'grow', style: _styles.resizeDetectorContainerStyles, ref: this._onResizeDetectorGrowRef, onScroll: this._resizeDetectorOnScroll },\r\n                React.createElement(\"div\", { style: _styles.resizeGrowDetectorStyles }))),\r\n            (React.createElement(\"div\", { key: 'shrink', style: _styles.resizeDetectorContainerStyles, ref: this._onResizeDetectorShrinkRef, onScroll: this._resizeDetectorOnScroll },\r\n                React.createElement(\"div\", { style: _styles.resizeShrinkDetectorStyles }))),\r\n        ];\r\n    };\r\n    View.prototype._resizeDetectorReset = function () {\r\n        // Scroll the detectors to the bottom-right corner so\r\n        // that `scroll` events will be triggered when the container\r\n        // is resized.\r\n        var scrollMax = 100500;\r\n        var node = this._resizeDetectorNodes.grow;\r\n        if (node) {\r\n            node.scrollLeft = scrollMax;\r\n            node.scrollTop = scrollMax;\r\n        }\r\n        node = this._resizeDetectorNodes.shrink;\r\n        if (node) {\r\n            node.scrollLeft = scrollMax;\r\n            node.scrollTop = scrollMax;\r\n        }\r\n    };\r\n    View.prototype.getChildContext = function () {\r\n        // Let descendant Types components know that their nearest Types ancestor is not an Types.Text.\r\n        // Because they're in an Types.View, they should use their normal styling rather than their\r\n        // special styling for appearing inline with text.\r\n        var childContext = {\r\n            isRxParentAText: false,\r\n        };\r\n        // Provide the descendants with the focus manager and popup container (if any).\r\n        if (this._focusManager) {\r\n            childContext.focusManager = this._focusManager;\r\n        }\r\n        if (this._popupContainer) {\r\n            childContext.popupContainer = this._popupContainer;\r\n        }\r\n        if (this._focusArbitratorProvider) {\r\n            childContext.focusArbitrator = this._focusArbitratorProvider;\r\n        }\r\n        return childContext;\r\n    };\r\n    View.prototype._getContainer = function () {\r\n        if (!this._isMounted) {\r\n            return null;\r\n        }\r\n        try {\r\n            return ReactDOM.findDOMNode(this);\r\n        }\r\n        catch (_a) {\r\n            // Handle exception due to potential unmount race condition.\r\n            return null;\r\n        }\r\n    };\r\n    View.prototype._isHidden = function () {\r\n        return !!this._popupContainer && this._popupContainer.isHidden();\r\n    };\r\n    View.prototype._updateFocusArbitratorProvider = function (props) {\r\n        if (props.arbitrateFocus) {\r\n            if (this._focusArbitratorProvider) {\r\n                this._focusArbitratorProvider.setCallback(props.arbitrateFocus);\r\n            }\r\n            else {\r\n                this._focusArbitratorProvider = new AutoFocusHelper_1.FocusArbitratorProvider(this, props.arbitrateFocus);\r\n            }\r\n        }\r\n        else if (this._focusArbitratorProvider) {\r\n            delete this._focusArbitratorProvider;\r\n        }\r\n    };\r\n    View.prototype.setFocusRestricted = function (restricted) {\r\n        if (!this._focusManager || !this.props.restrictFocusWithin) {\r\n            if (AppConfig_1.default.isDevelopmentMode()) {\r\n                console.error('View: setFocusRestricted method requires restrictFocusWithin property to be set');\r\n            }\r\n            return;\r\n        }\r\n        if (!this._isHidden()) {\r\n            if (restricted) {\r\n                this._focusManager.restrictFocusWithin(FocusManager_1.RestrictFocusType.RestrictedFocusFirst);\r\n            }\r\n            else {\r\n                this._focusManager.removeFocusRestriction();\r\n            }\r\n        }\r\n        this._isFocusRestricted = restricted;\r\n    };\r\n    View.prototype.setFocusLimited = function (limited) {\r\n        if (!this._focusManager || !this._limitFocusWithin) {\r\n            if (AppConfig_1.default.isDevelopmentMode()) {\r\n                console.error('View: setFocusLimited method requires limitFocusWithin property to be set');\r\n            }\r\n            return;\r\n        }\r\n        if (!this._isHidden()) {\r\n            if (limited && !this._isFocusLimited) {\r\n                this._focusManager.limitFocusWithin(this.props.limitFocusWithin);\r\n            }\r\n            else if (!limited && this._isFocusLimited) {\r\n                this._focusManager.removeFocusLimitation();\r\n            }\r\n        }\r\n        this._isFocusLimited = limited;\r\n    };\r\n    View.prototype.render = function () {\r\n        var combinedStyles = Styles_1.default.combine([_styles.defaultStyle, this.props.style]);\r\n        var ariaRole = AccessibilityUtil_1.default.accessibilityTraitToString(this.props.accessibilityTraits);\r\n        var tabIndex = this.props.tabIndex;\r\n        var ariaSelected = AccessibilityUtil_1.default.accessibilityTraitToAriaSelected(this.props.accessibilityTraits);\r\n        var isAriaHidden = AccessibilityUtil_1.default.isHidden(this.props.importantForAccessibility);\r\n        var accessibilityLabel = this.props.accessibilityLabel;\r\n        var ariaLabelledBy = this.props.ariaLabelledBy;\r\n        var ariaRoleDescription = this.props.ariaRoleDescription;\r\n        var ariaLive = this.props.accessibilityLiveRegion ?\r\n            AccessibilityUtil_1.default.accessibilityLiveRegionToString(this.props.accessibilityLiveRegion) :\r\n            undefined;\r\n        var ariaValueNow = this.props.ariaValueNow;\r\n        if (!ariaRole && !accessibilityLabel && !ariaLabelledBy && !ariaRoleDescription && !ariaLive &&\r\n            (ariaSelected === undefined) && (ariaValueNow === undefined) && (tabIndex === undefined)) {\r\n            // When the accessibility properties are not specified, set role to none.\r\n            // It tells the screen readers to skip the node, but unlike setting\r\n            // aria-hidden to true, allows the sub DOM to be processed further.\r\n            // This signigicantly improves the screen readers performance.\r\n            ariaRole = 'none';\r\n        }\r\n        var props = {\r\n            role: ariaRole,\r\n            tabIndex: tabIndex,\r\n            style: combinedStyles,\r\n            title: this.props.title,\r\n            'aria-label': accessibilityLabel,\r\n            'aria-hidden': isAriaHidden,\r\n            'aria-selected': ariaSelected,\r\n            'aria-labelledby': ariaLabelledBy,\r\n            'aria-roledescription': ariaRoleDescription,\r\n            'aria-live': ariaLive,\r\n            'aria-valuenow': ariaValueNow,\r\n            onContextMenu: this.props.onContextMenu,\r\n            onDoubleClick: this.props.onDoubleClick,\r\n            onMouseEnter: this.props.onMouseEnter,\r\n            onMouseLeave: this.props.onMouseLeave,\r\n            onMouseOver: this.props.onMouseOver,\r\n            onMouseMove: this.props.onMouseMove,\r\n            // Weird things happen: ReactXP.Types.Touch is not assignable to React.Touch\r\n            onTouchStart: this.props.onResponderStart,\r\n            onTouchStartCapture: this.props.onTouchStartCapture,\r\n            onTouchMove: this.props.onResponderMove,\r\n            onTouchMoveCapture: this.props.onTouchMoveCapture,\r\n            onTouchEnd: this.props.onResponderRelease,\r\n            onTouchCancel: this.props.onResponderTerminate,\r\n            draggable: this.props.onDragStart ? true : undefined,\r\n            onDragStart: this.props.onDragStart,\r\n            onDrag: this.props.onDrag,\r\n            onDragEnd: this.props.onDragEnd,\r\n            onDragEnter: this.props.onDragEnter,\r\n            onDragOver: this.props.onDragOver,\r\n            onDragLeave: this.props.onDragLeave,\r\n            onDrop: this.props.onDrop,\r\n            onClick: this.props.onPress,\r\n            onFocus: this.props.onFocus,\r\n            onBlur: this.props.onBlur,\r\n            onKeyDown: this.props.onKeyPress,\r\n            id: this.props.id,\r\n        };\r\n        if (this.props.blockPointerEvents) {\r\n            // Make this element and all children transparent to pointer events\r\n            props.className = 'reactxp-block-pointer-events';\r\n            combinedStyles.pointerEvents = 'none';\r\n        }\r\n        else if (this.props.ignorePointerEvents) {\r\n            // Make this element transparent to pointer events, but allow children to still receive events\r\n            props.className = 'reactxp-ignore-pointer-events';\r\n            combinedStyles.pointerEvents = 'none';\r\n        }\r\n        var reactElement;\r\n        var childAnimationsEnabled = this.props.animateChildEnter || this.props.animateChildMove || this.props.animateChildLeave;\r\n        if (childAnimationsEnabled) {\r\n            reactElement = (React.createElement(AnimateListEdits_1.default, __assign({}, props, { \"data-test-id\": this.props.testId, animateChildEnter: this.props.animateChildEnter, animateChildMove: this.props.animateChildMove, animateChildLeave: this.props.animateChildLeave }), this.props.children));\r\n        }\r\n        else {\r\n            reactElement = (React.createElement(\"div\", __assign({}, props, { \"data-test-id\": this.props.testId }),\r\n                this._renderResizeDetectorIfNeeded(combinedStyles),\r\n                this.props.children));\r\n        }\r\n        return this.context.isRxParentAText ?\r\n            restyleForInlineText_1.default(reactElement) :\r\n            reactElement;\r\n    };\r\n    View.prototype.UNSAFE_componentWillReceiveProps = function (nextProps) {\r\n        _super.prototype.UNSAFE_componentWillReceiveProps.call(this, nextProps);\r\n        if (AppConfig_1.default.isDevelopmentMode()) {\r\n            if (this.props.restrictFocusWithin !== nextProps.restrictFocusWithin) {\r\n                console.error('View: restrictFocusWithin is readonly and changing it during the component life cycle has no effect');\r\n            }\r\n            if (this.props.limitFocusWithin !== nextProps.limitFocusWithin) {\r\n                console.error('View: limitFocusWithin is readonly and changing it during the component life cycle has no effect');\r\n            }\r\n        }\r\n        if (('arbitrateFocus' in nextProps) && (this.props.arbitrateFocus !== nextProps.arbitrateFocus)) {\r\n            this._updateFocusArbitratorProvider(nextProps);\r\n        }\r\n    };\r\n    View.prototype.enableFocusManager = function () {\r\n        if (this._focusManager) {\r\n            if (this.props.restrictFocusWithin && this._isFocusRestricted !== false) {\r\n                this._focusManager.restrictFocusWithin(FocusManager_1.RestrictFocusType.RestrictedFocusFirst);\r\n            }\r\n            if (this._limitFocusWithin && this._isFocusLimited) {\r\n                this._focusManager.limitFocusWithin(this.props.limitFocusWithin);\r\n            }\r\n        }\r\n    };\r\n    View.prototype.disableFocusManager = function () {\r\n        if (this._focusManager) {\r\n            this._focusManager.release();\r\n        }\r\n    };\r\n    View.prototype.componentDidMount = function () {\r\n        var _this = this;\r\n        _super.prototype.componentDidMount.call(this);\r\n        if (this.props.autoFocus) {\r\n            this.requestFocus();\r\n        }\r\n        // If we are mounted as visible, do our initialization now. If we are hidden, it will\r\n        // be done later when the popup is shown.\r\n        if (!this._isHidden()) {\r\n            this.enableFocusManager();\r\n        }\r\n        if (this._focusManager && this._popupContainer) {\r\n            this._popupToken = this._popupContainer.registerPopupComponent(function () { return _this.enableFocusManager(); }, function () { return _this.disableFocusManager(); });\r\n        }\r\n    };\r\n    View.prototype.componentWillUnmount = function () {\r\n        _super.prototype.componentWillUnmount.call(this);\r\n        this.disableFocusManager();\r\n        if (this._popupToken) {\r\n            this._popupContainer.unregisterPopupComponent(this._popupToken);\r\n        }\r\n    };\r\n    View.prototype.blur = function () {\r\n        var el = this._getContainer();\r\n        if (el) {\r\n            el.blur();\r\n        }\r\n    };\r\n    View.prototype.requestFocus = function () {\r\n        var _this = this;\r\n        AutoFocusHelper_1.FocusArbitratorProvider.requestFocus(this, function () { return _this.focus(); }, function () { return _this._isMounted; });\r\n    };\r\n    View.prototype.focus = function () {\r\n        var el = this._getContainer();\r\n        if (el) {\r\n            el.focus();\r\n        }\r\n    };\r\n    View.contextTypes = {\r\n        isRxParentAText: PropTypes.bool,\r\n        focusManager: PropTypes.object,\r\n        popupContainer: PropTypes.object,\r\n        focusArbitrator: PropTypes.object,\r\n    };\r\n    View.childContextTypes = {\r\n        isRxParentAText: PropTypes.bool.isRequired,\r\n        focusManager: PropTypes.object,\r\n        popupContainer: PropTypes.object,\r\n        focusArbitrator: PropTypes.object,\r\n    };\r\n    return View;\r\n}(ViewBase_1.default));\r\nexports.View = View;\r\nFocusManager_2.applyFocusableComponentMixin(View, function (nextProps) {\r\n    // VoiceOver with the VoiceOver key combinations (Ctrl+Option+Left/Right) focuses\r\n    // <div>s when whatever tabIndex is set (even if tabIndex=-1). So, View is focusable\r\n    // when tabIndex is not undefined.\r\n    var tabIndex = nextProps && ('tabIndex' in nextProps) ? nextProps.tabIndex : this.props.tabIndex;\r\n    return tabIndex !== undefined;\r\n});\r\nexports.default = View;\r\n"]},"metadata":{},"sourceType":"script"}