{"ast":null,"code":"\"use strict\";\n/**\r\n * AccessibilityAnnouncer.tsx\r\n *\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT license.\r\n *\r\n * Implements the behavior for announcing text to screen readers, using aria-live regions.\r\n */\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AccessibilityAnnouncer = void 0;\n\nvar React = require(\"react\");\n\nvar Interfaces_1 = require(\"../common/Interfaces\");\n\nvar Timers_1 = require(\"../common/utils/Timers\");\n\nvar Accessibility_1 = require(\"./Accessibility\");\n\nvar AccessibilityUtil_1 = require(\"./AccessibilityUtil\");\n\nvar Styles_1 = require(\"./Styles\");\n\nvar _isMac = typeof navigator !== 'undefined' && typeof navigator.platform === 'string' && navigator.platform.indexOf('Mac') >= 0;\n\nvar _styles = {\n  liveRegionContainer: Styles_1.default.combine({\n    position: 'absolute',\n    overflow: 'hidden',\n    opacity: 0,\n    top: -30,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    height: 30,\n    whiteSpace: 'pre'\n  })\n};\n\nvar AccessibilityAnnouncer =\n/** @class */\nfunction (_super) {\n  __extends(AccessibilityAnnouncer, _super);\n\n  function AccessibilityAnnouncer(props) {\n    var _this = _super.call(this, props) || this; // Update announcement text.\n\n\n    _this._newAnnouncementEventChangedSubscription = Accessibility_1.default.newAnnouncementReadyEvent.subscribe(function (announcement) {\n      if (_this.state.announcementText === announcement) {\n        // If the previous announcement is the same as the current announcement\n        // we will append a ' ' to it. This ensures that the text in DOM of aria-live region changes\n        // and  will be read by screen Reader\n        announcement += ' ';\n      }\n\n      if (_isMac) {\n        // annnouncementText should never be in nested div for mac.\n        // Voice over ignores reading nested divs in aria-live container.\n        _this.setState({\n          announcementText: announcement\n        });\n      } else {\n        // Additionally, alternate between announcement text directly under the aria-live element and\n        // nested in a div to work around issues with some readers. NVDA on Windows is known to\n        // not announce aria-live reliably without this, for example.\n        _this.setState({\n          announcementText: announcement,\n          announcementTextInNestedDiv: !_this.state.announcementTextInNestedDiv\n        });\n      }\n    });\n    _this.state = _this._getInitialState();\n    return _this;\n  }\n\n  AccessibilityAnnouncer.prototype._getInitialState = function () {\n    return {\n      announcementText: '',\n      announcementTextInNestedDiv: false\n    };\n  };\n\n  AccessibilityAnnouncer.prototype.componentDidUpdate = function (prevProps, prevState) {\n    // When a new announcement text is set in the live region, start a timer to clear the text from the div so that it can't be focused\n    // using a screen reader.\n    if (prevState.announcementText !== this.state.announcementText && this.state.announcementText) {\n      this._startClearAnnouncementTimer();\n    }\n  };\n\n  AccessibilityAnnouncer.prototype.componentWillUnmount = function () {\n    if (this._newAnnouncementEventChangedSubscription) {\n      this._newAnnouncementEventChangedSubscription.unsubscribe();\n\n      this._newAnnouncementEventChangedSubscription = undefined;\n    }\n  };\n\n  AccessibilityAnnouncer.prototype.render = function () {\n    var announcement = this.state.announcementTextInNestedDiv ? React.createElement(\"div\", null, \" \", this.state.announcementText, \" \") : this.state.announcementText;\n    return React.createElement(\"div\", {\n      style: _styles.liveRegionContainer,\n      \"aria-live\": AccessibilityUtil_1.default.accessibilityLiveRegionToString(Interfaces_1.Types.AccessibilityLiveRegion.Assertive),\n      \"aria-atomic\": 'true',\n      \"aria-relevant\": 'additions text'\n    }, announcement);\n  };\n\n  AccessibilityAnnouncer.prototype._cancelClearAnnouncementTimer = function () {\n    if (this._clearAnnouncementTimer) {\n      Timers_1.default.clearTimeout(this._clearAnnouncementTimer);\n      this._clearAnnouncementTimer = undefined;\n    }\n  };\n\n  AccessibilityAnnouncer.prototype._startClearAnnouncementTimer = function () {\n    var _this = this;\n\n    this._cancelClearAnnouncementTimer();\n\n    this._clearAnnouncementTimer = Timers_1.default.setTimeout(function () {\n      _this.setState({\n        announcementText: ''\n      });\n    }, 2000);\n  };\n\n  return AccessibilityAnnouncer;\n}(React.Component);\n\nexports.AccessibilityAnnouncer = AccessibilityAnnouncer;\nexports.default = AccessibilityAnnouncer;","map":{"version":3,"sources":["/Users/dangthang/Desktop/webStreamGame/node_modules/react-ult/dist/web/AccessibilityAnnouncer.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__","constructor","create","defineProperty","exports","value","AccessibilityAnnouncer","React","require","Interfaces_1","Timers_1","Accessibility_1","AccessibilityUtil_1","Styles_1","_isMac","navigator","platform","indexOf","_styles","liveRegionContainer","default","combine","position","overflow","opacity","top","bottom","left","right","height","whiteSpace","_super","props","_this","_newAnnouncementEventChangedSubscription","newAnnouncementReadyEvent","subscribe","announcement","state","announcementText","setState","announcementTextInNestedDiv","_getInitialState","componentDidUpdate","prevProps","prevState","_startClearAnnouncementTimer","componentWillUnmount","unsubscribe","undefined","render","createElement","style","accessibilityLiveRegionToString","Types","AccessibilityLiveRegion","Assertive","_cancelClearAnnouncementTimer","_clearAnnouncementTimer","clearTimeout","setTimeout","Component"],"mappings":"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","sourcesContent":["\"use strict\";\r\n/**\r\n * AccessibilityAnnouncer.tsx\r\n *\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT license.\r\n *\r\n * Implements the behavior for announcing text to screen readers, using aria-live regions.\r\n */\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.AccessibilityAnnouncer = void 0;\r\nvar React = require(\"react\");\r\nvar Interfaces_1 = require(\"../common/Interfaces\");\r\nvar Timers_1 = require(\"../common/utils/Timers\");\r\nvar Accessibility_1 = require(\"./Accessibility\");\r\nvar AccessibilityUtil_1 = require(\"./AccessibilityUtil\");\r\nvar Styles_1 = require(\"./Styles\");\r\nvar _isMac = (typeof navigator !== 'undefined') && (typeof navigator.platform === 'string') && (navigator.platform.indexOf('Mac') >= 0);\r\nvar _styles = {\r\n    liveRegionContainer: Styles_1.default.combine({\r\n        position: 'absolute',\r\n        overflow: 'hidden',\r\n        opacity: 0,\r\n        top: -30,\r\n        bottom: 0,\r\n        left: 0,\r\n        right: 0,\r\n        height: 30,\r\n        whiteSpace: 'pre',\r\n    }),\r\n};\r\nvar AccessibilityAnnouncer = /** @class */ (function (_super) {\r\n    __extends(AccessibilityAnnouncer, _super);\r\n    function AccessibilityAnnouncer(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        // Update announcement text.\r\n        _this._newAnnouncementEventChangedSubscription =\r\n            Accessibility_1.default.newAnnouncementReadyEvent.subscribe(function (announcement) {\r\n                if (_this.state.announcementText === announcement) {\r\n                    // If the previous announcement is the same as the current announcement\r\n                    // we will append a ' ' to it. This ensures that the text in DOM of aria-live region changes\r\n                    // and  will be read by screen Reader\r\n                    announcement += ' ';\r\n                }\r\n                if (_isMac) {\r\n                    // annnouncementText should never be in nested div for mac.\r\n                    // Voice over ignores reading nested divs in aria-live container.\r\n                    _this.setState({\r\n                        announcementText: announcement,\r\n                    });\r\n                }\r\n                else {\r\n                    // Additionally, alternate between announcement text directly under the aria-live element and\r\n                    // nested in a div to work around issues with some readers. NVDA on Windows is known to\r\n                    // not announce aria-live reliably without this, for example.\r\n                    _this.setState({\r\n                        announcementText: announcement,\r\n                        announcementTextInNestedDiv: !_this.state.announcementTextInNestedDiv,\r\n                    });\r\n                }\r\n            });\r\n        _this.state = _this._getInitialState();\r\n        return _this;\r\n    }\r\n    AccessibilityAnnouncer.prototype._getInitialState = function () {\r\n        return {\r\n            announcementText: '',\r\n            announcementTextInNestedDiv: false,\r\n        };\r\n    };\r\n    AccessibilityAnnouncer.prototype.componentDidUpdate = function (prevProps, prevState) {\r\n        // When a new announcement text is set in the live region, start a timer to clear the text from the div so that it can't be focused\r\n        // using a screen reader.\r\n        if (prevState.announcementText !== this.state.announcementText && this.state.announcementText) {\r\n            this._startClearAnnouncementTimer();\r\n        }\r\n    };\r\n    AccessibilityAnnouncer.prototype.componentWillUnmount = function () {\r\n        if (this._newAnnouncementEventChangedSubscription) {\r\n            this._newAnnouncementEventChangedSubscription.unsubscribe();\r\n            this._newAnnouncementEventChangedSubscription = undefined;\r\n        }\r\n    };\r\n    AccessibilityAnnouncer.prototype.render = function () {\r\n        var announcement = this.state.announcementTextInNestedDiv ?\r\n            (React.createElement(\"div\", null,\r\n                \" \",\r\n                this.state.announcementText,\r\n                \" \")) :\r\n            this.state.announcementText;\r\n        return (React.createElement(\"div\", { style: _styles.liveRegionContainer, \"aria-live\": AccessibilityUtil_1.default.accessibilityLiveRegionToString(Interfaces_1.Types.AccessibilityLiveRegion.Assertive), \"aria-atomic\": 'true', \"aria-relevant\": 'additions text' }, announcement));\r\n    };\r\n    AccessibilityAnnouncer.prototype._cancelClearAnnouncementTimer = function () {\r\n        if (this._clearAnnouncementTimer) {\r\n            Timers_1.default.clearTimeout(this._clearAnnouncementTimer);\r\n            this._clearAnnouncementTimer = undefined;\r\n        }\r\n    };\r\n    AccessibilityAnnouncer.prototype._startClearAnnouncementTimer = function () {\r\n        var _this = this;\r\n        this._cancelClearAnnouncementTimer();\r\n        this._clearAnnouncementTimer = Timers_1.default.setTimeout(function () {\r\n            _this.setState({\r\n                announcementText: '',\r\n            });\r\n        }, 2000);\r\n    };\r\n    return AccessibilityAnnouncer;\r\n}(React.Component));\r\nexports.AccessibilityAnnouncer = AccessibilityAnnouncer;\r\nexports.default = AccessibilityAnnouncer;\r\n"]},"metadata":{},"sourceType":"script"}