var e,n=require("react"),t=(e=n)&&"object"==typeof e&&"default"in e?e.default:e;function r(e,n){return e.width===n.width&&e.height===n.height}function u(){return{width:window.innerWidth,height:window.innerHeight}}function i(e){var n=e.getBoundingClientRect();return{width:n.width,height:n.height}}function o(){return{x:window.scrollX,y:window.scrollY}}function l(e){return window.scrollY+e.getBoundingClientRect().top}function c(e){var t=n.useRef(e);return t.current=e,t}function f(e,n){if(null!==n)return""+(e.rowNumber-(null!==n.firstRenderedRowNumber?n.firstRenderedRowNumber-1:0))}module.exports=function(e){var d=n.useRef(null),s=function(e){var t=function(){var e=n.useState(function(){return u()}),t=e[0],i=e[1],o=c(t);return n.useEffect(function(){function e(){var e=u();r(o.current,e)||i(e)}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[o]),t}(),f=function(){var e=n.useState(o()),t=e[0],r=e[1],u=c(t);return n.useEffect(function(){function e(){var e,n,t=o();((e=u.current).x!==(n=t).x||e.y!==n.y)&&r(t)}return window.addEventListener("scroll",e),window.addEventListener("resize",e),function(){window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}},[u]),t}(),d=function(e){var t=n.useState(function(){return e.current?l(e.current):null}),r=t[0],u=t[1];return n.useEffect(function(){var n=new ResizeObserver(function(e){u(l(e[0].target))});return e.current&&n.observe(e.current),function(){return n.disconnect()}},[e]),r}(e),s=function(e){var t=n.useState(function(){return e.current?i(e.current):null}),u=t[0],o=t[1],l=c(u);return n.useEffect(function(){var n=new ResizeObserver(function(e){var n=i(e[0].target);null!==l.current&&r(l.current,n)||o(n)});return e.current&&n.observe(e.current),function(){return n.disconnect()}},[e]),u}(e);return n.useMemo(function(){return{windowSize:t,windowScroll:f,elementWindowOffset:d,elementSize:s}},[t,f,d,s])}(d),a=function(e,t){var r=t.items,u=t.getWindowMargin,i=t.getGridGap,o=t.getColumnCount,l=t.getItemData,c=e.elementSize?e.elementSize.width:null,f=n.useMemo(function(){return u?u(e.windowSize.height):e.windowSize.height},[e.windowSize.height,u]),d=n.useMemo(function(){return null===c?null:i?i(c,e.windowSize.height):0},[c,e.windowSize.height,i]),s=n.useMemo(function(){return null===c?null:null===d?null:o(c,d)},[o,c,d]),a=function(e,n,t){return null===e||null===n||null===t?null:Math.round((t-(e-1)*n)/e)}(s,d,c),w=n.useMemo(function(){if(null===a)return null;var e=a;return r.map(function(n){return{data:l(n,e),item:n}})},[r,a,l]);return n.useMemo(function(){return null===f||null===d||null===s||null===w?null:{windowMargin:f,gridGap:d,columnCount:s,entries:w}},[f,d,s,w])}(s,e),w=function(e){return n.useMemo(function(){if(null===e)return null;var n=1,t=0,r=0,u=e.entries.map(function(u,i){var o=u.data.key,l=i%e.columnCount+1,c=Math.floor(i/e.columnCount)+1;c!==n&&(n=c,t+=r+e.gridGap,r=0);var f=t,d=Math.round(u.data.height);return r=Math.max(r,d),{key:o,columnNumber:l,rowNumber:c,offset:f,height:d,item:u.item}});return{totalHeight:t+r,cells:u}},[e])}(a),m=function(e,t,r){return n.useMemo(function(){if(null===r||null===t)return null;var n=[],u=null,i=null;if(null!==e.elementWindowOffset)for(var o=e.elementWindowOffset,l=0,c=r.cells;l<c.length;l+=1){var f=c[l],d=o+f.offset,s=e.windowScroll.y;d>s+e.windowSize.height+t.windowMargin||d+f.height<s-t.windowMargin||(null===u&&(u=f.rowNumber),f.rowNumber===u&&(i=i?Math.min(i,f.offset):f.offset),n.push(f))}return{cellsToRender:n,firstRenderedRowNumber:u,firstRenderedRowOffset:i}},[r,t,e.windowScroll.y,e.windowSize.height,e.elementWindowOffset])}(s,a,w),h=function(e,t){var r=n.useState(!1),u=r[0],i=r[1];return n.useEffect(function(){var n=new IntersectionObserver(function(e){i(e[0].isIntersecting)},{rootMargin:t});return e.current&&n.observe(e.current),function(){return n.disconnect()}},[e,t]),u}(d,(null!==a?a.windowMargin:0)+"px");return t.createElement("div",{ref:d,style:{boxSizing:"border-box",height:null!==w?w.totalHeight:void 0,paddingTop:null!==m&&null!==m.firstRenderedRowOffset?m.firstRenderedRowOffset:0}},h&&t.createElement("div",{style:{display:"grid",gridTemplateColumns:null!==a?"repeat("+a.columnCount+", "+(e.fixedColumnWidth?e.fixedColumnWidth+"px":"1fr")+")":void 0,gridGap:a?a.gridGap:void 0,justifyContent:"center",alignItems:"center"}},null!==m&&m.cellsToRender.map(function(n){return t.createElement("div",{key:n.key,style:{height:n.height,gridColumnStart:""+n.columnNumber,gridRowStart:f(n,m)}},e.renderItem(n.item))})))};
//# sourceMappingURL=GridList.js.map
