import n,{useRef as e,useMemo as t,useState as r,useEffect as i}from"react";function u(n,e){return n.width===e.width&&n.height===e.height}function o(){return{width:window.innerWidth,height:window.innerHeight}}function l(n){var e=n.getBoundingClientRect();return{width:e.width,height:e.height}}function c(){return{x:window.scrollX,y:window.scrollY}}function d(n){return window.scrollY+n.getBoundingClientRect().top}function f(n){var t=e(n);return t.current=n,t}function w(n,e){if(null!==e)return""+(n.rowNumber-(null!==e.firstRenderedRowNumber?e.firstRenderedRowNumber-1:0))}export default function(a){var s=e(null),h=function(n){var e=function(){var n=r(function(){return o()}),e=n[0],t=n[1],l=f(e);return i(function(){function n(){var n=o();u(l.current,n)||t(n)}return window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}},[l]),e}(),w=function(){var n=r(c()),e=n[0],t=n[1],u=f(e);return i(function(){function n(){var n,e,r=c();((n=u.current).x!==(e=r).x||n.y!==e.y)&&t(r)}return window.addEventListener("scroll",n),window.addEventListener("resize",n),function(){window.removeEventListener("scroll",n),window.removeEventListener("resize",n)}},[u]),e}(),a=function(n){var e=r(function(){return n.current?d(n.current):null}),t=e[0],u=e[1];return i(function(){var e=new ResizeObserver(function(n){u(d(n[0].target))});return n.current&&e.observe(n.current),function(){return e.disconnect()}},[n]),t}(n),s=function(n){var e=r(function(){return n.current?l(n.current):null}),t=e[0],o=e[1],c=f(t);return i(function(){var e=new ResizeObserver(function(n){var e=l(n[0].target);null!==c.current&&u(c.current,e)||o(e)});return n.current&&e.observe(n.current),function(){return e.disconnect()}},[n]),t}(n);return t(function(){return{windowSize:e,windowScroll:w,elementWindowOffset:a,elementSize:s}},[e,w,a,s])}(s),g=function(n,e){var r=e.items,i=e.getWindowMargin,u=e.getGridGap,o=e.getColumnCount,l=e.getItemData,c=n.elementSize?n.elementSize.width:null,d=t(function(){return i?i(n.windowSize.height):n.windowSize.height},[n.windowSize.height,i]),f=t(function(){return null===c?null:u?u(c,n.windowSize.height):0},[c,n.windowSize.height,u]),w=t(function(){return null===c?null:null===f?null:o(c,f)},[o,c,f]),a=function(n,e,t){return null===n||null===e||null===t?null:Math.round((t-(n-1)*e)/n)}(w,f,c),s=t(function(){if(null===a)return null;var n=a;return r.map(function(e){return{data:l(e,n),item:e}})},[r,a,l]);return t(function(){return null===d||null===f||null===w||null===s?null:{windowMargin:d,gridGap:f,columnCount:w,entries:s}},[d,f,w,s])}(h,a),m=function(n){return t(function(){if(null===n)return null;var e=1,t=0,r=0,i=n.entries.map(function(i,u){var o=i.data.key,l=u%n.columnCount+1,c=Math.floor(u/n.columnCount)+1;c!==e&&(e=c,t+=r+n.gridGap,r=0);var d=t,f=Math.round(i.data.height);return r=Math.max(r,f),{key:o,columnNumber:l,rowNumber:c,offset:d,height:f,item:i.item}});return{totalHeight:t+r,cells:i}},[n])}(g),v=function(n,e,r){return t(function(){if(null===r||null===e)return null;var t=[],i=null,u=null;if(null!==n.elementWindowOffset)for(var o=n.elementWindowOffset,l=0,c=r.cells;l<c.length;l+=1){var d=c[l],f=o+d.offset,w=n.windowScroll.y;f>w+n.windowSize.height+e.windowMargin||f+d.height<w-e.windowMargin||(null===i&&(i=d.rowNumber),d.rowNumber===i&&(u=u?Math.min(u,d.offset):d.offset),t.push(d))}return{cellsToRender:t,firstRenderedRowNumber:i,firstRenderedRowOffset:u}},[r,e,n.windowScroll.y,n.windowSize.height,n.elementWindowOffset])}(h,g,m),p=function(n,e){var t=r(!1),u=t[0],o=t[1];return i(function(){var t=new IntersectionObserver(function(n){o(n[0].isIntersecting)},{rootMargin:e});return n.current&&t.observe(n.current),function(){return t.disconnect()}},[n,e]),u}(s,(null!==g?g.windowMargin:0)+"px");return n.createElement("div",{ref:s,style:{boxSizing:"border-box",height:null!==m?m.totalHeight:void 0,paddingTop:null!==v&&null!==v.firstRenderedRowOffset?v.firstRenderedRowOffset:0}},p&&n.createElement("div",{style:{display:"grid",gridTemplateColumns:null!==g?"repeat("+g.columnCount+", "+(a.fixedColumnWidth?a.fixedColumnWidth+"px":"1fr")+")":void 0,gridGap:g?g.gridGap:void 0,justifyContent:"center",alignItems:"center"}},null!==v&&v.cellsToRender.map(function(e){return n.createElement("div",{key:e.key,style:{height:e.height,gridColumnStart:""+e.columnNumber,gridRowStart:w(e,v)}},a.renderItem(e.item))})))}
//# sourceMappingURL=GridList.module.js.map
